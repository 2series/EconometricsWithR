<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Using R for Introduction to Econometrics</title>
  <meta name="description" content="Using <tt>R</tt> for Introduction to Econometrics">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Using R for Introduction to Econometrics" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="Emwikts1970/URFITE-Bookdown" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Using R for Introduction to Econometrics" />
  
  
  

<meta name="author" content="Christoph Hanck, Martin Arnold, Alexander Gerber and Martin Schmelzer">


<meta name="date" content="2018-07-30">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="TGIVRM.html">
<link rel="next" href="attdfc.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="js/hideOutput.js"></script>
<script type="text/javascript" src="MathJax-2.7.2/MathJax.js?config=default"></script>

 <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        extensions: ["tex2jax.js", "TeX/AMSmath.js"],
        tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
        jax: ["input/TeX","output/CommonHTML"]
      });
      MathJax.Hub.processSectionDelay = 0;
  </script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110299877-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-110299877-1');
</script>

<!-- open review block -->

<script async defer src="https://hypothes.is/embed.js"></script>

<!-- datacamp-light-latest -->

<script src="https://cdn.datacamp.com/datacamp-light-latest.min.js"></script>


<!-- <script src="js/d3.v3.min.js"></script>
<script src="js/leastsquares.js"></script>
<script src="js/d3functions.js"></script>
<script src="d3.slider.js"></script>
<script src="slrm.js"></script> -->


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code > span.dt { color: #204a87; } /* DataType */
code > span.dv { color: #0000cf; } /* DecVal */
code > span.bn { color: #0000cf; } /* BaseN */
code > span.fl { color: #0000cf; } /* Float */
code > span.ch { color: #4e9a06; } /* Char */
code > span.st { color: #4e9a06; } /* String */
code > span.co { color: #8f5902; font-style: italic; } /* Comment */
code > span.ot { color: #8f5902; } /* Other */
code > span.al { color: #ef2929; } /* Alert */
code > span.fu { color: #000000; } /* Function */
code > span.er { color: #a40000; font-weight: bold; } /* Error */
code > span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #000000; } /* SpecialChar */
code > span.vs { color: #4e9a06; } /* VerbatimString */
code > span.ss { color: #4e9a06; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #000000; } /* Variable */
code > span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code > span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code > span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code > span.ex { } /* Extension */
code > span.at { color: #c4a000; } /* Attribute */
code > span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code > span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="toc.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">URFITE</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="a-very-short-introduction-to-r-and-rstudio.html"><a href="a-very-short-introduction-to-r-and-rstudio.html"><i class="fa fa-check"></i><b>1.1</b> A Very Short Introduction to <tt>R</tt> and <em>RStudio</em></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="ivr.html"><a href="ivr.html"><i class="fa fa-check"></i><b>2</b> Instrumental Variables Regression</a><ul>
<li class="chapter" data-level="2.1" data-path="TIVEWASRAASI.html"><a href="TIVEWASRAASI.html"><i class="fa fa-check"></i><b>2.1</b> The IV Estimator with a Single Regressor and a Single Instrument</a></li>
<li class="chapter" data-level="2.2" data-path="TGIVRM.html"><a href="TGIVRM.html"><i class="fa fa-check"></i><b>2.2</b> The General IV Regression Model</a></li>
<li class="chapter" data-level="2.3" data-path="civ.html"><a href="civ.html"><i class="fa fa-check"></i><b>2.3</b> Checking Instrument Validity</a></li>
<li class="chapter" data-level="2.4" data-path="attdfc.html"><a href="attdfc.html"><i class="fa fa-check"></i><b>2.4</b> Application to the Demand for Cigarettes</a></li>
<li class="chapter" data-level="2.5" data-path="where-do-valid-instruments-come-from.html"><a href="where-do-valid-instruments-come-from.html"><i class="fa fa-check"></i><b>2.5</b> Where Do Valid Instruments Come From?</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Using <tt>R</tt> for Introduction to Econometrics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div class = rmdreview>
This book is in <b>Open Review</b>. We want your feedback to make the book better for you and other students. You may annotate some text by <span style="background-color: #3297FD; color: white">selecting it with the cursor</span> and then click the <i class="h-icon-annotate"></i> on the pop-up menu. You can also see the annotations of others: click the <i class="h-icon-chevron-left"></i> in the upper right hand corner of the page <i class="fa fa-arrow-circle-right  fa-rotate-315" aria-hidden="true"></i>
</div>
<div id="civ" class="section level2">
<h2><span class="header-section-number">2.3</span> Checking Instrument Validity</h2>
<div id="instrument-relevance" class="section level4 unnumbered">
<h4>Instrument Relevance</h4>
<p>Instruments that explain little variation in the endogenous regressor <span class="math inline">\(X\)</span> are called <em>weak instruments</em>. Weak instruments provide little information about the variation in <span class="math inline">\(X\)</span> that is exploited by IV regression to estimate the effect of interest: the estimate of the coefficient on the endogenous regressor is estimated inaccurately. Moreover, weak instruments cause the distribution of the estimator to deviate considerably from a normal distribution even in large samples such that the usual methods for obtaining inference about the true coefficient on <span class="math inline">\(X\)</span> may produce wrong results. See Chapter 12.3 and Appendix 12.4 of the book for a more detailed argument on the undesirable consequences of using weak instruments in IV regression.</p>
<div class="keyconcept">
<h3 class="right">
Key Concept 12.5
</h3>
<h3 class="left">
A Rule of Thumb for Checking for Weak Instruments
</h3>
<p>Consider the case of a single endogenous regressor <span class="math inline">\(X\)</span> and <span class="math inline">\(m\)</span> exogenous instruments <span class="math inline">\(Z_1,\dots,Z_m\)</span>. If the coefficients on all instruments in the population first-stage regression of a TSLS estimation are zero, the instruments do not explain any of the variation in the <span class="math inline">\(X\)</span> which clearly violates assumption 1 of Key Concept 12.2. Although the latter case is unlikely to be encountered in practice, we should ask ourselves to what extend the assumption of instrument relevance should be fulfilled.</p>
<p>While this is hard to answer for general IV regression, in the case of a <em>single</em> endogenous regressor <span class="math inline">\(X\)</span> one may use the following rule of thumb:</p>
<p>Compute the <span class="math inline">\(F\)</span>-statistic which corresponds to the hypothesis that the coefficients on <span class="math inline">\(Z_1,\dots,Z_m\)</span> are all zero in the first-stage regression. If the <span class="math inline">\(F\)</span>-statistic is less than <span class="math inline">\(10\)</span>, the instruments are weak such that the TSLS estimate of the coefficient on <span class="math inline">\(X\)</span> is biased and no valid statistical inference about its true value can be made. See also Appendix 12.5 of the book.</p>
</div>
<p>The rule of thumb stated in Key Concept 12.5 is easily implemented in <tt>R</tt>. One simply has to run the first-stage regression using <tt>lm()</tt> and subsequently compute the heteroskedasticity-robust <span class="math inline">\(F\)</span>-statistic by means of <tt>linearHypothesis()</tt>. This is part of the application to the demand for cigarettes discussed in Chapter <a href="attdfc.html#attdfc">2.4</a>.</p>
</div>
<div id="if-instruments-are-weak" class="section level4 unnumbered">
<h4>If Instruments are Weak</h4>
<p>There are two ways to proceed if instruments are weak:</p>
<ol style="list-style-type: decimal">
<li><p>Discard the weak instruments and/or find stronger instruments. While the former is only an option if the unknown coefficients remain identified when the weak instruments are discarded, the latter can be very difficult and even may require a redesign of the whole study.</p></li>
<li><p>Stick with the weak instruments but use methods that improve upon TSLS in this scenario, for example limited information maximum likelihood estimation, see Appendix 12.5 of the book.</p></li>
</ol>
</div>
<div id="when-the-assumption-of-instrument-exogeneity-is-violated" class="section level4 unnumbered">
<h4>When the Assumption of Instrument Exogeneity is Violated</h4>
<p>If there is correlation between an instrument and the error term, IV regression does not produce consistent estimates (this is shown in Appendix 12.4 of the book). As econometricians, we wish to use the available information for gaining statistical inference whether an instrument is exogenous or not. The overidentifying restrictions test (also called the <span class="math inline">\(J\)</span>-test) is an approach to test the hypothesis that <em>additional</em> instruments are exogenous under the assumption that the set of instruments consists of enough valid instruments to identify the coefficients of interest. For the <span class="math inline">\(J\)</span>-test to be applicable there need to be <em>more</em> instruments than endogenous regressors. The <span class="math inline">\(J\)</span>-test is summarized in Key Concept 12.5.</p>
<div class="keyconcept">
<h3 class="right">
Key Concept 12.6
</h3>
<h3 class="left">
<span class="math inline">\(J\)</span>-Statistic / Overidentifying Restrictions Test
</h3>
<p>Take <span class="math inline">\(\widehat{u}_i^{TSLS} \ , \ i = 1,\dots,n\)</span>, the residuals of the TSLS estimation of the general IV regression model <a href="TGIVRM.html#eq:givmodel">(2.5)</a>. Run the OLS regression</p>
<span class="math display" id="eq:jstatreg">\[\begin{align}
  \widehat{u}_i^{TSLS} =&amp; \, \delta_0 + \delta_1 Z_{1i} + \dots + \delta_m Z_{mi} + \delta_{m+1} W_{1i} + \dots + \delta_{m+r} W_{ri} + e_i \tag{2.9}
\end{align}\]</span>
<p>and test the joint hypothesis <span class="math display">\[H_0: \delta_1 = 0, \dots, \delta_{m} = 0\]</span> which states that all instruments are exogenous. This can be done using the corresponding <span class="math inline">\(F\)</span>-statistic by computing <span class="math display">\[J = m  F.\]</span> This test is the overidentifying restrictions test and the statistic is called the <span class="math inline">\(J\)</span>-statistic with <span class="math display">\[J \sim \chi^2_{m-k}\]</span> in large samples under the assumption of homoskedasticity. The degrees of freedom <span class="math inline">\(m-k\)</span> state the degree of overidentification since this is the number of instruments <span class="math inline">\(m\)</span> minus the number of endogenous regressors <span class="math inline">\(k\)</span>.</p>
</div>
<p>It is important to note that the <span class="math inline">\(J\)</span>-statistic discussed in Key Concept 12.6 is only <span class="math inline">\(\chi^2_{m-k}\)</span> distributed when the error term <span class="math inline">\(e_i\)</span> in the regression <a href="civ.html#eq:jstatreg">(2.9)</a> is homoskedastic. A discussion of the heteroskedasticity-robust <span class="math inline">\(J\)</span>-statistic is beyond the scope of this chapter. We refer to Section 18.7 of the book for a theoretical argument.</p>
<p>As for the procedure shown in Key Concept 12.6, further interest lies in applying the <span class="math inline">\(J\)</span>-test using the function <tt>linearHypothesis()</tt> in <tt>R</tt>, which will be shown in context of estimation of the demand elasticity for cigarettes discussed in the next chapter.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="TGIVRM.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="attdfc.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 1
},
"edit": null,
"download": ["URFITE.pdf"],
"toc": {
"collapse": "subsection",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
