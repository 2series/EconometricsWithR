<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Introduction to Econometrics with R</title>
  <meta name="description" content="‘Introduction to Econometrics with R’ is an interactive companion to the well-received textbook ‘Introduction to Econometrics’ by James H. Stock and Mark W. Watson (2015). It guides students in implementing the empirical applications presented throughout the book using the statistical software package R.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Introduction to Econometrics with R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="images/cover.png" />
  <meta property="og:description" content="‘Introduction to Econometrics with R’ is an interactive companion to the well-received textbook ‘Introduction to Econometrics’ by James H. Stock and Mark W. Watson (2015). It guides students in implementing the empirical applications presented throughout the book using the statistical software package R." />
  <meta name="github-repo" content="Emwikts1970/URFITE-Bookdown" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Introduction to Econometrics with R" />
  
  <meta name="twitter:description" content="‘Introduction to Econometrics with R’ is an interactive companion to the well-received textbook ‘Introduction to Econometrics’ by James H. Stock and Mark W. Watson (2015). It guides students in implementing the empirical applications presented throughout the book using the statistical software package R." />
  <meta name="twitter:image" content="images/cover.png" />




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="3-5-where-do-valid-instruments-come-from.html">
<link rel="next" href="references.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<!-- font families -->

<link href="https://fonts.googleapis.com/css?family=PT+Sans|Pacifico|Source+Sans+Pro" rel="stylesheet">

<!-- function to adjust height of iframes automatically depending on content loaded -->

<script>
  function resizeIframe(obj) {
    obj.style.height = obj.contentWindow.document.body.scrollHeight + 'px';
  }
</script>

<script src="js/hideOutput.js"></script>
<script type="text/javascript" src="MathJax-2.7.2/MathJax.js?config=default"></script>

 <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        extensions: ["tex2jax.js", "TeX/AMSmath.js"],
        tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
        jax: ["input/TeX","output/CommonHTML"]
      });
      MathJax.Hub.processSectionDelay = 0;
  </script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110299877-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-110299877-1');
</script>

<!-- open review block -->

<script async defer src="https://hypothes.is/embed.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code > span.dt { color: #204a87; } /* DataType */
code > span.dv { color: #0000cf; } /* DecVal */
code > span.bn { color: #0000cf; } /* BaseN */
code > span.fl { color: #0000cf; } /* Float */
code > span.ch { color: #4e9a06; } /* Char */
code > span.st { color: #4e9a06; } /* String */
code > span.co { color: #8f5902; font-style: italic; } /* Comment */
code > span.ot { color: #8f5902; } /* Other */
code > span.al { color: #ef2929; } /* Alert */
code > span.fu { color: #000000; } /* Function */
code > span.er { color: #a40000; font-weight: bold; } /* Error */
code > span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #000000; } /* SpecialChar */
code > span.vs { color: #4e9a06; } /* VerbatimString */
code > span.ss { color: #4e9a06; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #000000; } /* Variable */
code > span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code > span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code > span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code > span.ex { } /* Extension */
code > span.at { color: #c4a000; } /* Attribute */
code > span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code > span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="toc.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://www.oek.wiwi.uni-due.de/en/">Chair of Econometrics @ Uni-DUE</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="1-introduction.html"><a href="1-introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="1-1-a-very-short-introduction-to-r-and-rstudio.html"><a href="1-1-a-very-short-introduction-to-r-and-rstudio.html"><i class="fa fa-check"></i><b>1.1</b> A Very Short Introduction to <tt>R</tt> and <em>RStudio</em></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2-nrf.html"><a href="2-nrf.html"><i class="fa fa-check"></i><b>2</b> Nonlinear Regression Functions</a><ul>
<li class="chapter" data-level="2.1" data-path="2-1-a-general-strategy-for-modelling-nonlinear-regression-functions.html"><a href="2-1-a-general-strategy-for-modelling-nonlinear-regression-functions.html"><i class="fa fa-check"></i><b>2.1</b> A General Strategy for Modelling Nonlinear Regression Functions</a></li>
<li class="chapter" data-level="2.2" data-path="2-2-nfoasiv.html"><a href="2-2-nfoasiv.html"><i class="fa fa-check"></i><b>2.2</b> Nonlinear Functions of a Single Independent Variable</a><ul>
<li class="chapter" data-level="" data-path="2-2-nfoasiv.html"><a href="2-2-nfoasiv.html#polynomials"><i class="fa fa-check"></i>Polynomials</a></li>
<li class="chapter" data-level="" data-path="2-2-nfoasiv.html"><a href="2-2-nfoasiv.html#logarithms"><i class="fa fa-check"></i>Logarithms</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="2-3-interactions-between-independent-variables.html"><a href="2-3-interactions-between-independent-variables.html"><i class="fa fa-check"></i><b>2.3</b> Interactions Between Independent Variables</a></li>
<li class="chapter" data-level="2.4" data-path="2-4-nonlinear-effects-on-test-scores-of-the-student-teacher-ratio.html"><a href="2-4-nonlinear-effects-on-test-scores-of-the-student-teacher-ratio.html"><i class="fa fa-check"></i><b>2.4</b> Nonlinear Effects on Test Scores of the Student-Teacher Ratio</a></li>
<li class="chapter" data-level="2.5" data-path="2-5-exercises.html"><a href="2-5-exercises.html"><i class="fa fa-check"></i><b>2.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="3-ivr.html"><a href="3-ivr.html"><i class="fa fa-check"></i><b>3</b> Instrumental Variables Regression</a><ul>
<li class="chapter" data-level="3.1" data-path="3-1-TIVEWASRAASI.html"><a href="3-1-TIVEWASRAASI.html"><i class="fa fa-check"></i><b>3.1</b> The IV Estimator with a Single Regressor and a Single Instrument</a></li>
<li class="chapter" data-level="3.2" data-path="3-2-TGIVRM.html"><a href="3-2-TGIVRM.html"><i class="fa fa-check"></i><b>3.2</b> The General IV Regression Model</a></li>
<li class="chapter" data-level="3.3" data-path="3-3-civ.html"><a href="3-3-civ.html"><i class="fa fa-check"></i><b>3.3</b> Checking Instrument Validity</a></li>
<li class="chapter" data-level="3.4" data-path="3-4-attdfc.html"><a href="3-4-attdfc.html"><i class="fa fa-check"></i><b>3.4</b> Application to the Demand for Cigarettes</a></li>
<li class="chapter" data-level="3.5" data-path="3-5-where-do-valid-instruments-come-from.html"><a href="3-5-where-do-valid-instruments-come-from.html"><i class="fa fa-check"></i><b>3.5</b> Where Do Valid Instruments Come From?</a></li>
<li class="chapter" data-level="3.6" data-path="3-6-exercises-1.html"><a href="3-6-exercises-1.html"><i class="fa fa-check"></i><b>3.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><em>Introduction to Econometrics with R</em></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div class = rmdreview>
This book is in <b>Open Review</b>. We want your feedback to make the book better for you and other students. You may annotate some text by <span style="background-color: #3297FD; color: white">selecting it with the cursor</span> and then click the <i class="h-icon-annotate"></i> on the pop-up menu. You can also see the annotations of others: click the <i class="h-icon-chevron-left"></i> in the upper right hand corner of the page <i class="fa fa-arrow-circle-right  fa-rotate-315" aria-hidden="true"></i>
</div>
<div id="exercises-1" class="section level2">
<h2><span class="header-section-number">3.6</span> Exercises</h2>
<div class="DCexercise">
<h4 id="the-college-distance-data" class="unnumbered">1. The College Distance Data</h4>
<p>There are many studies in labor economics which deal with the issue of estimating human capital earnings functions which state how wage income is determined by education and working experience. A prominent example is <span class="citation">Card (<a href="#ref-card1993">1993</a>)</span> who investigates the economic return to schooling and uses college proximity as an instrumental variable.</p>
<p>The exercises in this chapter deal with the dataset <tt>CollegeDistance</tt> which is similar to the data used by <span class="citation">Card (<a href="#ref-card1993">1993</a>)</span>. It stems from a survey of high school graduates with variables coded for wages, education, average tuition and a number of socio-economic measures. The data set also includes the distance from a college while the survey participants were in high school. <tt>CollegeDistance</tt> comes with the <tt>AER</tt> package.</p>
<p><strong>Instructions:</strong></p>
<ul>
<li><p>Attach the <tt>AER</tt> package and load the <tt>CollegeDistance</tt> data.</p></li>
<li><p>Get an overview over the data set.</p></li>
<li><p>The variable <tt>distance</tt> (the distance to the closest 4-year college in 10 miles) will serve as an instrument in later exercises. Use a histogram to visualize the distribution of <tt>distance</tt>.</p></li>
</ul>
<iframe src="DCL/ex12_1.html" frameborder="0" scrolling="no" style="width:100%;height:330px">
</iframe>
<p><strong>Hints:</strong></p>
<ul>
<li><p>Use <tt>data()</tt> to attach the data set.</p></li>
<li><p>The function <tt>hist()</tt> can be used to generate histograms.</p></li>
</ul>
</div>
<div class="DCexercise">
<h4 id="the-selection-problem" class="unnumbered">2. The Selection Problem</h4>
<p>Regressing <tt>wage</tt> on <tt>education</tt> and control variables to estimate the human capital earnings function is problematic because education is not randomly assigned across the surveyed: individuals make their own education choices and so measured differences in earnings between individuals with different levels of education depend on how these choices are made. In the literature this is referred to as a <em>selection problem</em>. This selection problem implies that <tt>education</tt> is <em>endogenous</em> so the OLS estimate will be biased and we cannot make valid inference regarding the true coefficient.</p>
<p>In this exercise you are asked to estimate two regressions which both do not yield trustworthy estimates of the coefficient on education due to the issue sketched above. Later you will compare the results to those obtained using the instrumental variables approach applied by <span class="citation">Card (<a href="#ref-card1993">1993</a>)</span>.</p>
<p>The <tt>AER</tt> package has been attached. The data set <tt>CollegeDistance</tt> is available in your global environment.</p>
<p><strong>Instructions:</strong></p>
<ul>
<li><p>Regress the <em>logarithm</em> of <tt>wage</tt> on <tt>education</tt>, that is, estimate the model <span class="math display">\[\log(wage_i) = \beta_0 + \beta_1 education_i + u_i\]</span> Save the result to <tt>wage_mod_1</tt>.</p></li>
<li><p>Augment the model by including the regressors <tt>unemp</tt>, <tt>hispanic</tt>, <tt>af-am</tt>, <tt>female</tt> and <tt>urban</tt>. Save the result to <tt>wage_mod_2</tt></p></li>
<li><p>Obtain summaries on the estimated coefficients in both models.</p></li>
</ul>
<iframe src="DCL/ex12_2.html" frameborder="0" scrolling="no" style="width:100%;height:330px">
</iframe>
</div>
<div class="DCexercise">
<h4 id="instrumental-variables-regression-approaches-i" class="unnumbered">3. Instrumental Variables Regression Approaches — I</h4>
<p>The above discussed selection problem renders the regression estimates in Exercise 2 implausible which is why <span class="citation">Card (<a href="#ref-card1993">1993</a>)</span> suggests instrumental variables regression that uses college distance as an instrument for education.</p>
<p>Why use college distance as an instrument? The logic behind this is that distance from a college will be correlated to the decision to pursue a college degree (relevance) but may not predict wages apart from increased education (exogeneity) so college proximity could be considered a valid instrument (recall the definition of a valid instrument stated at the beginning of Chapter <a href="3-1-TIVEWASRAASI.html#TIVEWASRAASI">3.1</a>).</p>
<p>The <tt>AER</tt> package has been attached. The data set <tt>CollegeDistance</tt> is available in your global environment.</p>
<p><strong>Instructions:</strong></p>
<ul>
<li><p>Compute the correlations of the instrument <tt>distance</tt> with the edogenous regressor <tt>education</tt> and the dependent variable <tt>wage</tt>.</p></li>
<li><p>How much of the variation in <tt>education</tt> is explained by the <em>first-stage regression</em> which uses <tt>distance</tt> as a regressor? Save the result to <tt>R2</tt>.</p></li>
<li><p>Repeat Exercise 2 with IV regression, i.e., employ <tt>distance</tt> as an instrument for <tt>education</tt> in both regressions using <tt>ivreg()</tt>. Save the results to <tt>wage_mod_iv1</tt> and <tt>wage_mod_iv2</tt>. Obtain robust coefficient summaries for both models.</p></li>
</ul>
<iframe src="DCL/ex12_3.html" frameborder="0" scrolling="no" style="width:100%;height:410px">
</iframe>
</div>
<div class="DCexercise">
<h4 id="instrumental-variables-regression-approaches-ii" class="unnumbered">4. Instrumental Variables Regression Approaches — II</h4>
<p>Convince yourself that <tt>ivreg()</tt> works as expected by implementing the TSLS algorithm presented in Key Concept 12.2 for a single instrument, see Chapter <a href="3-2-TGIVRM.html#TGIVRM">3.2</a>.</p>
<p><strong>Instructions:</strong></p>
<ul>
<li><p>Complete the function <tt>TSLS()</tt> such that it implements the TSLS estimator.</p></li>
<li><p>Use <tt>TSLS()</tt> to reproduce the coefficient estimates obtained using <tt>ivreg()</tt> for both models of Exercise 3.</p></li>
</ul>
<iframe src="DCL/ex12_4.html" frameborder="0" scrolling="no" style="width:100%;height:460px">
</iframe>
<p><strong>Hints:</strong></p>
<ul>
<li><p>Completion of the function boils down to replacing the <tt>. . .</tt> by appropriate arguments.</p></li>
<li>Besides the data set (<tt>data</tt>), the function expects the dependent variable (<tt>Y</tt>), exogenous regressors (<tt>W</tt>), the endogenous regressors (<tt>X</tt>) and an instrument (<tt>Z</tt>) as arguments. All of these should be of class <tt>character</tt>.</li>
<li><p>Including <tt>W = NULL</tt> in the head of the function definition ensures that the set of exogenous variables is empty, by default.</p></li>
</ul>
</div>
<div class="DCexercise">
<h4 id="should-we-trust-the-results" class="unnumbered">5. Should we trust the Results?</h4>
<p>This is not a real code exercise (there are no submission correctness tests for checking your code). Instead we would like you to use the widget below to compare the results obtained using the OLS regressions of Exercise 2 with those of the IV regressions of Exercise 3.</p>
<p>The data set <tt>CollegeDistance</tt> and all model objects from Exercises 2 and 3 are available in the global environment.</p>
<p><strong>Instructions:</strong></p>
<p>Convince yourself of the following:</p>
<ol style="list-style-type: decimal">
<li><p>It is likely that the bias of the estimated coefficient on <tt>education</tt> in the simple regression model <tt>wage_mod_1</tt> is subtantial because the regressor is endogenous due to omitting variables from the model which correlate with <tt>education</tt> and impact wage income.</p></li>
<li><p>Due to the selection problem in described in Exercise 2, the estimate of the coefficient of interest is not trustworthy even in the multiple regression model <tt>wage_mod_2</tt> which includes several socio-economic control variables. The coeffiecient on <tt>education</tt> is not significant and its estimate is close to zero).</p></li>
<li><p>Instrumenting education by the college distance as done in <tt>wage_mod_iv1</tt> yields the IV estimate of the coefficient of interest. The result should, however, not be considered reliable because this simple model probably suffers from omitted variables bias just as the multiple regression model <tt>wage_mod_2</tt> from Exercise 2, see 1. Again, the coeffiecient on <tt>education</tt> is not significant its estimate is quite small.</p></li>
<li><p><tt>wage_mod_iv2</tt>, the multiple regression model where we include demographic control variables and instrumend <tt>education</tt> by <tt>distance</tt> delivers the most reliable estimate of the impact of education on wage income among all the models considered. The coefficient is highly significant and the estimate is about <span class="math inline">\(0.067\)</span>. Following Key Concept 8.2, the interpretation is that an additional year of schooling is expected to increases wage income by roughly <span class="math inline">\(0.067 \cdot 100\% = 6.7\%\)</span>.</p></li>
<li><p>Is the estimate of the coefficient on education reported by <tt>wage_mod_iv2</tt> trustworthy? This question is not easy to answer. In any case, we should bear in mind that using an instrument variables approach is problematic when the instrument is <em>weak</em>. This could be the case here: Families who value education may move into neighborhoods close to colleges or neighborhoods near colleges may have stronger job markets. Both of those features may invalidate the instrument by introducing unobserved variables which influence lifetime earnings but cannot be captured in our measure of education.</p></li>
</ol>
<iframe src="DCL/ex12_5.html" frameborder="0" scrolling="no" style="width:100%;height:340px">
</iframe>
</div>

</div>
<!-- </div> -->
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-card1993">
<p>Card, D. (1993). <em>Using geographic variation in college proximity to estimate the return to schooling</em>. National Bureau of Economic Research.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="3-5-where-do-valid-instruments-come-from.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": true,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 1
},
"edit": null,
"download": null,
"toc": {
"collapse": "subsection",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
